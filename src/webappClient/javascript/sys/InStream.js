//
// Copyright (c) 2009, Brian Frank and Andy Frank
// Licensed under the Academic Free License version 3.0
//
// History:
//   11 May 09  Andy Frank  Creation
//

/**
 * InStream
 */
var sys_InStream = sys_Obj.extend(
{

//////////////////////////////////////////////////////////////////////////
// Constructor
//////////////////////////////////////////////////////////////////////////

  $ctor: function() {},
  type: function()  {  return sys_Type.find("sys::InStream"); },

//////////////////////////////////////////////////////////////////////////
// InStream
//////////////////////////////////////////////////////////////////////////

  // read: function()
  // readBuf: function(buf, n)
  // unread: function(n)

  skip: function(n)
  {
    if ($in != null) return $in.skip(n);

    for (var i=0; i<n; ++i)
      if (this.read() == 0) return i;
    return n;
  },

  // readAllBuf: function()
  // readBufFully: function(buf, n)

  // ...

  readObj: function(options)
  {
    if (options == undefined) options = null;
    return new fanx_ObjDecoder(this, options).readObj();
  },

//////////////////////////////////////////////////////////////////////////
// Fields
//////////////////////////////////////////////////////////////////////////

  $in: null

});

//////////////////////////////////////////////////////////////////////////
// Static Methods
//////////////////////////////////////////////////////////////////////////

sys_InStream.makeForStr = function(s)
{
  return new sys_StrInStream(s);
}